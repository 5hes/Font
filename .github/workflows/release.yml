name: Download font and release

on:
  push:
  workflow_dispatch:
    inputs:
      task:
        description: "Download font and release"
        required: true
        type: boolean

permissions: write-all

jobs:
  task:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Create a new tag
      run: |
        # TAG_NAME="v0.1.5"
        # git tag $TAG_NAME
        # git push origin $TAG_NAME

    - name: Setup environment
      run: |
        sudo apt-get update
        sudo apt-get install p7zip-full

    - name: Download
      run: |
        # wget -O font.zip "https://github.com/be5invis/Iosevka/releases/download/v32.3.0/PkgTTF-Unhinted-IosevkaFixedCurly-32.3.0.zip"
        # 7z x *.dmg
        
        # wget -O font.zip "https://openfs.oppomobile.com/open/oop/202412/05/0f155015fff7700fbbcef7fa2aad78dc.zip"
        
        wget -O font.zip "https://c1029.dmpdmp.com/75e96226d6de56e6100a04c47f7ee529/6777c1d2/2020/08/02/5e6d8da938b1db5e53f2245e59f964c9.zip?fn=%E5%B0%8F%E7%B1%B3%E5%85%B0%E4%BA%ADPro.zip"
        mkdir Fonts
        mv font.zip Fonts/
        cd Fonts
        7z x font.zip
        ls -ltrah
        tree
        
        # cd SFCompactFonts/
        # 7z x *pkg*
        # 7z x Payload~
        
    - name: Check
      run: |
        ls -ltrah
        ls -ltra
        tree
        
    - name: Create Release and Upload Release Asset
      uses: softprops/action-gh-release@v2
      with:
        tag_name: v0.1.5
        name: MiLan
        draft: false
        prerelease: false
        files: |
          Fonts/小米兰亭Pro中粗.ttf
          Fonts/小米兰亭Pro中黑.ttf
          Fonts/小米兰亭Pro极细(比细体粗).ttf
          Fonts/小米兰亭Pro正常.ttf
          Fonts/小米兰亭Pro特粗.ttf
          Fonts/小米兰亭Pro粗体.ttf
          Fonts/小米兰亭Pro细体.ttf
          Fonts/小米兰亭Pro超粗.ttf
          Fonts/小米兰亭Pro超细.ttf
          Fonts/小米兰亭Pro默认.ttf